import{a7 as V,aY as w,aZ as x,Y as t,o as p,c as C,a as r,w as k,W as B,ai as E,am as I,_ as L}from"./index-96e8ce82.js";import{Q as _,R as c,M as U,G as b,S as N}from"./request-113ae567.js";const G="/assets/640-3458b757.gif",M=s=>_.post("/user/login",s),R=s=>_.post("/user/login/code",s),Y={class:"center"},F=V({__name:"Login",setup(s){const{setUserInfo:g}=w(),f=x(),e=t(""),l=t(!1),i=t(!1),v=async()=>{if(e.value===""){d();return}l.value=!0;const o=await M({name:e.value});l.value=!1,o.code===1?i.value=!0:c({duration:5e3,message:o.message,type:"error"})},a=t(""),y=async()=>{if(a.value.length===4){if(e.value===""||a.value===""){d();return}const o=await R({name:e.value,code:a.value});o.code===1?(g({name:e.value}),f.push("/")):c({duration:5e3,message:o.message,type:"error"})}},d=()=>{c({duration:5e3,message:r("img",{src:G},null),type:"error"})};return(o,n)=>{const h=U,m=b;return p(),C("div",Y,[r(m,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=u=>e.value=u),placeholder:"请输入你的大名",style:{"margin-bottom":"10px"}},{append:k(()=>[r(h,{icon:B(N),onClick:v,loading:l.value},null,8,["icon","loading"])]),_:1},8,["modelValue"]),i.value?(p(),E(m,{key:0,modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=u=>a.value=u),placeholder:"请输入邮箱验证码",onInput:y},null,8,["modelValue"])):I("",!0)])}}});const W=L(F,[["__scopeId","data-v-46c7592f"]]);export{W as default};
