import{C as ae,x as te,B as _,A as P,ad as B,y as oe,d as F,q as ne,E as d,D as I,t as N,l as ie,o as s,c as m,W as D,b as t,K as r,as as se,R as p,w as y,T as U,e as v,V as z,a as E,U as G,ai as le,O as re,a3 as ce,at as H,Y as ue}from"./index-3baf4151.js";import{t as de,v as ve}from"./el-table-column-75fc0e2e.js";import{U as A,C as K,I as M,o as pe,u as fe,p as me,s as he,a as be,d as ge,E as k,z as ye,_ as Ce,t as we,D as $}from"./request-e3dd6866.js";import{i as Y,u as Se}from"./index-12b3ad1f.js";const Ve=n=>["",...ae].includes(n),ke=te({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Ve},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:Y},inactiveIcon:{type:Y},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:oe(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),_e={[A]:n=>_(n)||P(n)||B(n),[K]:n=>_(n)||P(n)||B(n),[M]:n=>_(n)||P(n)||B(n)},Ie=["onClick"],Ee=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],Te=["aria-hidden"],Pe=["aria-hidden"],Be=["aria-hidden"],O="ElSwitch",Ne=F({name:O}),De=F({...Ne,props:ke,emits:_e,setup(n,{expose:w,emit:f}){const a=n,c=ce(),{formItem:u}=pe(),h=fe(),o=ne("switch");(e=>{e.forEach(i=>{Se({from:i[0],replacement:i[1],scope:O,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},d(()=>{var V;return!!((V=c.vnode.props)!=null&&V[i[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:b}=me(a,{formItemContext:u}),g=he(d(()=>a.loading)),T=I(a.modelValue!==!1),C=I(),j=I(),J=d(()=>[o.b(),o.m(h.value),o.is("disabled",g.value),o.is("checked",l.value)]),Q=d(()=>[o.e("label"),o.em("label","left"),o.is("active",!l.value)]),X=d(()=>[o.e("label"),o.em("label","right"),o.is("active",l.value)]),Z=d(()=>({width:be(a.width)}));N(()=>a.modelValue,()=>{T.value=!0}),N(()=>a.value,()=>{T.value=!1});const L=d(()=>T.value?a.modelValue:a.value),l=d(()=>L.value===a.activeValue);[a.activeValue,a.inactiveValue].includes(L.value)||(f(A,a.inactiveValue),f(K,a.inactiveValue),f(M,a.inactiveValue)),N(l,e=>{var i;C.value.checked=e,a.validateEvent&&((i=u==null?void 0:u.validate)==null||i.call(u,"change").catch(V=>ge()))});const S=()=>{const e=l.value?a.inactiveValue:a.activeValue;f(A,e),f(K,e),f(M,e),re(()=>{C.value.checked=l.value})},R=()=>{if(g.value)return;const{beforeChange:e}=a;if(!e){S();return}const i=e();[H(i),_(i)].includes(!0)||we(O,"beforeChange must return type `Promise<boolean>` or `boolean`"),H(i)?i.then(q=>{q&&S()}).catch(q=>{}):i&&S()},x=d(()=>o.cssVarBlock({...a.activeColor?{"on-color":a.activeColor}:null,...a.inactiveColor?{"off-color":a.inactiveColor}:null,...a.borderColor?{"border-color":a.borderColor}:null})),ee=()=>{var e,i;(i=(e=C.value)==null?void 0:e.focus)==null||i.call(e)};return ie(()=>{C.value.checked=l.value}),w({focus:ee,checked:l}),(e,i)=>(s(),m("div",{class:r(t(J)),style:G(t(x)),onClick:le(R,["prevent"])},[D("input",{id:t(b),ref_key:"input",ref:C,class:r(t(o).e("input")),type:"checkbox",role:"switch","aria-checked":t(l),"aria-disabled":t(g),name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:t(g),tabindex:e.tabindex,onChange:S,onKeydown:se(R,["enter"])},null,42,Ee),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(s(),m("span",{key:0,class:r(t(Q))},[e.inactiveIcon?(s(),p(t(k),{key:0},{default:y(()=>[(s(),p(U(e.inactiveIcon)))]),_:1})):v("v-if",!0),!e.inactiveIcon&&e.inactiveText?(s(),m("span",{key:1,"aria-hidden":t(l)},z(e.inactiveText),9,Te)):v("v-if",!0)],2)):v("v-if",!0),D("span",{ref_key:"core",ref:j,class:r(t(o).e("core")),style:G(t(Z))},[e.inlinePrompt?(s(),m("div",{key:0,class:r(t(o).e("inner"))},[e.activeIcon||e.inactiveIcon?(s(),p(t(k),{key:0,class:r(t(o).is("icon"))},{default:y(()=>[(s(),p(U(t(l)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(s(),m("span",{key:1,class:r(t(o).is("text")),"aria-hidden":!t(l)},z(t(l)?e.activeText:e.inactiveText),11,Pe)):v("v-if",!0)],2)):v("v-if",!0),D("div",{class:r(t(o).e("action"))},[e.loading?(s(),p(t(k),{key:0,class:r(t(o).is("loading"))},{default:y(()=>[E(t(ye))]),_:1},8,["class"])):v("v-if",!0)],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(s(),m("span",{key:1,class:r(t(X))},[e.activeIcon?(s(),p(t(k),{key:0},{default:y(()=>[(s(),p(U(e.activeIcon)))]),_:1})):v("v-if",!0),!e.activeIcon&&e.activeText?(s(),m("span",{key:1,"aria-hidden":!t(l)},z(e.activeText),9,Be)):v("v-if",!0)],2)):v("v-if",!0)],14,Ie))}});var Ue=Ce(De,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const ze=ue(Ue);const Ae=()=>$.get("/user/getAll"),Ke=n=>$.post("/user/websitePermission/update",n),Le=F({__name:"UserManage",setup(n){const w=I([]);(async()=>{const c=await Ae();w.value=c.data.map(u=>({...u,loading:!1}))})();const a=c=>{const{name:u,websitePermission:h}=c;return async()=>{c.loading=!0;try{const o=await Ke({name:u,websitePermission:!h});return c.loading=!1,o.code===1}catch{return c.loading=!1,!1}}};return(c,u)=>{const h=ve,o=ze,W=de;return s(),p(W,{data:w.value,border:""},{default:y(()=>[E(h,{prop:"name",align:"center",label:"姓名"}),E(h,{prop:"websitePermission",align:"center",label:"共享"},{default:y(({row:b})=>[E(o,{modelValue:b.websitePermission,"onUpdate:modelValue":g=>b.websitePermission=g,"before-change":a(b),loading:b.loading},null,8,["modelValue","onUpdate:modelValue","before-change","loading"])]),_:1})]),_:1},8,["data"])}}});export{Le as default};
