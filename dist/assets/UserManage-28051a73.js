import{E as ae,z as te,D as _,C as T,ad as N,A as ne,d as O,t as oe,H as d,G as I,x as B,n as ie,o as s,c as m,b as D,f as t,M as r,as as se,U as p,w as y,V as U,g as v,X as z,e as E,W as Q,ai as le,Q as re,a4 as ce,at as R,Z as ue}from"./index-4c31cb7d.js";import{t as de,v as ve}from"./el-table-column-d17b60b1.js";import{U as A,C as M,I as K,o as pe,u as fe,p as me,s as he,a as be,d as ge,E as k,z as ye,_ as Ce,t as we,D as Z}from"./request-ac6bd0cc.js";import{i as X,u as Se}from"./index-01dc0184.js";const Ve=o=>["",...ae].includes(o),ke=te({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Ve},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:X},inactiveIcon:{type:X},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:ne(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),_e={[A]:o=>_(o)||T(o)||N(o),[M]:o=>_(o)||T(o)||N(o),[K]:o=>_(o)||T(o)||N(o)},Ie=["onClick"],Ee=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],Pe=["aria-hidden"],Te=["aria-hidden"],Ne=["aria-hidden"],F="ElSwitch",Be=O({name:F}),De=O({...Be,props:ke,emits:_e,setup(o,{expose:w,emit:f}){const a=o,c=ce(),{formItem:u}=pe(),h=fe(),n=oe("switch");(e=>{e.forEach(i=>{Se({from:i[0],replacement:i[1],scope:F,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},d(()=>{var V;return!!((V=c.vnode.props)!=null&&V[i[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:b}=me(a,{formItemContext:u}),g=he(d(()=>a.loading)),P=I(a.modelValue!==!1),C=I(),$=I(),j=d(()=>[n.b(),n.m(h.value),n.is("disabled",g.value),n.is("checked",l.value)]),q=d(()=>[n.e("label"),n.em("label","left"),n.is("active",!l.value)]),J=d(()=>[n.e("label"),n.em("label","right"),n.is("active",l.value)]),Y=d(()=>({width:be(a.width)}));B(()=>a.modelValue,()=>{P.value=!0}),B(()=>a.value,()=>{P.value=!1});const G=d(()=>P.value?a.modelValue:a.value),l=d(()=>G.value===a.activeValue);[a.activeValue,a.inactiveValue].includes(G.value)||(f(A,a.inactiveValue),f(M,a.inactiveValue),f(K,a.inactiveValue)),B(l,e=>{var i;C.value.checked=e,a.validateEvent&&((i=u==null?void 0:u.validate)==null||i.call(u,"change").catch(V=>ge()))});const S=()=>{const e=l.value?a.inactiveValue:a.activeValue;f(A,e),f(M,e),f(K,e),re(()=>{C.value.checked=l.value})},H=()=>{if(g.value)return;const{beforeChange:e}=a;if(!e){S();return}const i=e();[R(i),_(i)].includes(!0)||we(F,"beforeChange must return type `Promise<boolean>` or `boolean`"),R(i)?i.then(L=>{L&&S()}).catch(L=>{}):i&&S()},x=d(()=>n.cssVarBlock({...a.activeColor?{"on-color":a.activeColor}:null,...a.inactiveColor?{"off-color":a.inactiveColor}:null,...a.borderColor?{"border-color":a.borderColor}:null})),ee=()=>{var e,i;(i=(e=C.value)==null?void 0:e.focus)==null||i.call(e)};return ie(()=>{C.value.checked=l.value}),w({focus:ee,checked:l}),(e,i)=>(s(),m("div",{class:r(t(j)),style:Q(t(x)),onClick:le(H,["prevent"])},[D("input",{id:t(b),ref_key:"input",ref:C,class:r(t(n).e("input")),type:"checkbox",role:"switch","aria-checked":t(l),"aria-disabled":t(g),name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:t(g),tabindex:e.tabindex,onChange:S,onKeydown:se(H,["enter"])},null,42,Ee),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(s(),m("span",{key:0,class:r(t(q))},[e.inactiveIcon?(s(),p(t(k),{key:0},{default:y(()=>[(s(),p(U(e.inactiveIcon)))]),_:1})):v("v-if",!0),!e.inactiveIcon&&e.inactiveText?(s(),m("span",{key:1,"aria-hidden":t(l)},z(e.inactiveText),9,Pe)):v("v-if",!0)],2)):v("v-if",!0),D("span",{ref_key:"core",ref:$,class:r(t(n).e("core")),style:Q(t(Y))},[e.inlinePrompt?(s(),m("div",{key:0,class:r(t(n).e("inner"))},[e.activeIcon||e.inactiveIcon?(s(),p(t(k),{key:0,class:r(t(n).is("icon"))},{default:y(()=>[(s(),p(U(t(l)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(s(),m("span",{key:1,class:r(t(n).is("text")),"aria-hidden":!t(l)},z(t(l)?e.activeText:e.inactiveText),11,Te)):v("v-if",!0)],2)):v("v-if",!0),D("div",{class:r(t(n).e("action"))},[e.loading?(s(),p(t(k),{key:0,class:r(t(n).is("loading"))},{default:y(()=>[E(t(ye))]),_:1},8,["class"])):v("v-if",!0)],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(s(),m("span",{key:1,class:r(t(J))},[e.activeIcon?(s(),p(t(k),{key:0},{default:y(()=>[(s(),p(U(e.activeIcon)))]),_:1})):v("v-if",!0),!e.activeIcon&&e.activeText?(s(),m("span",{key:1,"aria-hidden":!t(l)},z(e.activeText),9,Ne)):v("v-if",!0)],2)):v("v-if",!0)],14,Ie))}});var Ue=Ce(De,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const ze=ue(Ue);const Ae=()=>Z.get("/user/getAll"),Me=o=>Z.post("/user/websitePermission/update",o),Ge=O({__name:"UserManage",setup(o){const w=I([]);(async()=>{const c=await Ae();w.value=c.data.map(u=>({...u,loading:!1}))})();const a=c=>{const{name:u,websitePermission:h}=c;return async()=>{c.loading=!0;try{const n=await Me({name:u,websitePermission:!h});return c.loading=!1,n.code===1}catch{return c.loading=!1,!1}}};return(c,u)=>{const h=ve,n=ze,W=de;return s(),p(W,{data:w.value,border:""},{default:y(()=>[E(h,{prop:"name",align:"center",label:"姓名"}),E(h,{prop:"websitePermission",align:"center",label:"共享"},{default:y(({row:b})=>[E(n,{modelValue:b.websitePermission,"onUpdate:modelValue":g=>b.websitePermission=g,"before-change":a(b),loading:b.loading},null,8,["modelValue","onUpdate:modelValue","before-change","loading"])]),_:1})]),_:1},8,["data"])}}});export{Ge as default};
