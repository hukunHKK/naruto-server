import{d as y,a as b,u as V,G as n,c as w,e as r,w as x,U as C,g as k,o as _,f as E,_ as I}from"./index-4c31cb7d.js";import{a as u,c as U,E as B}from"./el-button-f1e3c9a3.js";import{m as g,n as L}from"./request-ac6bd0cc.js";import{l as M,a as N}from"./login-0d64afdd.js";import"./index-01dc0184.js";const G="/assets/640-3458b757.gif",F={class:"center"},R=y({__name:"Login",setup(j){const{setUserInfo:i}=b(),c=V(),o=n(""),t=n(!1),d=n(!1),f=async()=>{if(o.value===""){m();return}t.value=!0;const e=await N({name:o.value,phone:g().isMobile});if(t.value=!1,e.code===1){if(e.message==="登录成功"){i(e.data),c.push("/");return}d.value=!0}else u({duration:5e3,message:e.message,type:"error"})},a=n(""),v=async()=>{if(a.value.length===4){if(o.value===""||a.value===""){m();return}const e=await M({name:o.value,code:a.value,phone:g().isMobile});e.code===1?(i({name:o.value}),c.push("/")):u({duration:5e3,message:e.message,type:"error"})}},m=()=>{u({duration:5e3,message:r("img",{src:G},null),type:"error"})};return(e,s)=>{const h=B,p=U;return _(),w("div",F,[r(p,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value=l),placeholder:"请输入你的大名",style:{"margin-bottom":"10px"}},{append:x(()=>[r(h,{icon:E(L),onClick:f,loading:t.value},null,8,["icon","loading"])]),_:1},8,["modelValue"]),d.value?(_(),C(p,{key:0,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=l=>a.value=l),placeholder:"请输入邮箱验证码",onInput:v},null,8,["modelValue"])):k("",!0)])}}});const J=I(R,[["__scopeId","data-v-048b5282"]]);export{J as default};
