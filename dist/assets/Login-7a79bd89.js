import{d as b,u as y,ab as V,D as n,c as w,a as r,w as x,R as C,e as k,o as _,b as E,_ as I}from"./index-3baf4151.js";import{a as u,c as B,E as L}from"./el-button-3ffd0b39.js";import{m as g,n as M}from"./request-e3dd6866.js";import{l as U,a as N}from"./login-cc933f12.js";import"./index-12b3ad1f.js";const R="/assets/640-3458b757.gif",D={class:"center"},F=b({__name:"Login",setup(G){const{setUserInfo:i}=y(),c=V(),o=n(""),t=n(!1),d=n(!1),f=async()=>{if(o.value===""){m();return}t.value=!0;const e=await N({name:o.value,phone:g().isMobile});if(t.value=!1,e.code===1){if(e.message==="登录成功"){i(e.data),c.push("/");return}d.value=!0}else u({duration:5e3,message:e.message,type:"error"})},a=n(""),v=async()=>{if(a.value.length===4){if(o.value===""||a.value===""){m();return}const e=await U({name:o.value,code:a.value,phone:g().isMobile});e.code===1?(i({name:o.value}),c.push("/")):u({duration:5e3,message:e.message,type:"error"})}},m=()=>{u({duration:5e3,message:r("img",{src:R},null),type:"error"})};return(e,s)=>{const h=L,p=B;return _(),w("div",D,[r(p,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value=l),placeholder:"请输入你的大名",style:{"margin-bottom":"10px"}},{append:x(()=>[r(h,{icon:E(M),onClick:f,loading:t.value},null,8,["icon","loading"])]),_:1},8,["modelValue"]),d.value?(_(),C(p,{key:0,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=l=>a.value=l),placeholder:"请输入邮箱验证码",onInput:v},null,8,["modelValue"])):k("",!0)])}}});const J=I(F,[["__scopeId","data-v-048b5282"]]);export{J as default};
